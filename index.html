<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="style/style_index.css">
    <link rel="stylesheet" href="style/style_danhmuc.css">
    <script src="js/search.js" defer></script>
    <script src="js/auth.js" defer></script>
    <script src="js/cart.js" defer></script>

    <title>Trang ch·ªß</title>
</head>
<body>
    <Header>
        <div class="daudo">
            <div class="dau">
                <div class="logo">
                    <a href="index.html">NH<span class="chu_o">o</span>M7</a>
                </div>
                <div class="search-container">
                    <div class="search-box">
                        <span class="search-icon">üîç</span>
                        <input type="text" placeholder="T√¨m ki·∫øm ·ªü ƒë√¢y" id="searchInput">
                        <button id="searchButton">T√¨m Ki·∫øm</button>
                    </div>
                </div>
            </div>
            <div class="giohang_taikhoan">
                <a href="giohang.html" class="giohang_taikhoan-item">
                    <div class="giohang-icon">
                        üõí
                        <span class="cart-count">0</span>
                    </div>
                    <p>Gi·ªè H√†ng</p>
                </a>
        
                <a href="taikhoan.html" class="giohang_taikhoan-item">
                    <img id="userAvatar" class="user-avatar" src="anh/avt_trang.png" alt="Avatar" style="width: 35px; height: 35px; border-radius: 50%; object-fit: cover; border: 2px solid #fff; margin-right: 8px;">
                    <p id="usernameDisplay">T√†i kho·∫£n</p>
                </a>
            </div>
        </div>
    </Header>
    <div class="gachtrang">
        <nav class="trangchu_danhmuc_gioithieu">
            <a href="index.html" class="trangchu_danhmuc_gioithieu-item active">Trang Ch·ªß</a>
            <a href="danhmuc.html" class="trangchu_danhmuc_gioithieu-item">Danh M·ª•c</a>
            <a href="gioithieu.html" class="trangchu_danhmuc_gioithieu-item">Gi·ªõi Thi·ªáu</a>
            <span class="underline1"></span>
        </nav>
    </div>
    
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const menuItems = document.querySelectorAll(".trangchu_danhmuc_gioithieu-item");
            const underline = document.querySelector(".underline1");

            function moveUnderline(element) {
                underline.style.width = `${element.offsetWidth}px`;
                underline.style.left = `${element.offsetLeft}px`;
            }

            const activeItem = document.querySelector(".trangchu_danhmuc_gioithieu-item.active");
            if (activeItem) {
                moveUnderline(activeItem);
            }

            menuItems.forEach(item => {
                item.addEventListener("click", function (e) {
                    if (this.getAttribute("href") === "#") {
                        e.preventDefault(); 
                    }

                    menuItems.forEach(i => i.classList.remove("active"));
                    this.classList.add("active");
                    moveUnderline(this);
                });
            });
        });
document.getElementById("searchButton").addEventListener("click", function() {
    handleSearch();
});

document.getElementById("searchInput").addEventListener("keypress", function(e) {
    if (e.key === "Enter") {
        handleSearch();
    }
});

function handleSearch() {
    let searchValue = document.getElementById("searchInput").value.trim();
    if (searchValue) {
        window.location.href = `timkiem.html?q=${encodeURIComponent(searchValue)}`;
    } else {
        alert("Vui l√≤ng nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm!");
    }
}
    </script>
    <div class="slider-container">
        <div class="slider">
            <div class="slide active">
                <img src="anh/banner1.jpg" alt="Banner 1">
            
            </div>
            <div class="slide">
                <img src="anh/banner2.jpg" alt="Banner 2">
            
            </div>
            <div class="slide">
                <img src="anh/banner3.jpg" alt="Banner 3">
            </div>
        </div>
        <button class="slider-button prev">‚ùÆ</button>
        <button class="slider-button next">‚ùØ</button>
        <div class="dots-container">
            <span class="dot active" data-index="0"></span>
            <span class="dot" data-index="1"></span>
            <span class="dot" data-index="2"></span>
        </div>
    </div>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        console.log("DOM ƒë√£ t·∫£i xong, b·∫Øt ƒë·∫ßu ki·ªÉm tra...");
        
       function checkLoginStatus() {
    const loggedInUser = localStorage.getItem("loggedInUser");
    const username = localStorage.getItem("username");
    const user = JSON.parse(localStorage.getItem("user") || "{}");
    const isLoggedIn = loggedInUser || username || (user && user.isLoggedIn);
    console.log("Tr·∫°ng th√°i ƒëƒÉng nh·∫≠p:", isLoggedIn ? "ƒê√£ ƒëƒÉng nh·∫≠p" : "Ch∆∞a ƒëƒÉng nh·∫≠p");
    return isLoggedIn;
}
        
        function updateProductLinks() {
            const isLoggedIn = checkLoginStatus();
            const productLinks = document.querySelectorAll('a[href^="thongtinsanpham.html"]');
            console.log("S·ªë li√™n k·∫øt s·∫£n ph·∫©m t√¨m th·∫•y:", productLinks.length);
            
            if (!isLoggedIn) {
                productLinks.forEach(link => {
                    const currentHref = link.getAttribute('href');
                    const newHref = currentHref.replace('thongtinsanpham.html', 'thongtinsanpham_cdn.html');
                    link.setAttribute('href', newHref);
                    console.log("ƒê√£ c·∫≠p nh·∫≠t li√™n k·∫øt:", currentHref, "->", newHref);
                });
            }
        }
        
        function updateCartLink() {
            const isLoggedIn = checkLoginStatus();
            const cartLink = document.querySelector('a[href="giohang.html"]');
            console.log("Li√™n k·∫øt gi·ªè h√†ng:", cartLink ? "T√¨m th·∫•y" : "Kh√¥ng t√¨m th·∫•y");
            
            if (cartLink && !isLoggedIn) {
                cartLink.setAttribute('href', 'dangnhap.html?redirect=giohang.html');
                console.log("ƒê√£ c·∫≠p nh·∫≠t li√™n k·∫øt gi·ªè h√†ng");
            }
        }
        
        function updateCartButtons() {
            const isLoggedIn = checkLoginStatus();
            const cartButtons = document.querySelectorAll('.cart-button');
            console.log("S·ªë n√∫t th√™m v√†o gi·ªè h√†ng t√¨m th·∫•y:", cartButtons.length);
            
            if (!isLoggedIn) {
                cartButtons.forEach(button => {
                    button.addEventListener('click', function(e) {
                        console.log("ƒê√£ nh·∫•n n√∫t th√™m v√†o gi·ªè h√†ng");
                        e.preventDefault();
                        window.location.href = 'dangnhap.html?redirect=index.html';
                    });
                });
            }
        }
        
        try {
            console.log("B·∫Øt ƒë·∫ßu c·∫≠p nh·∫≠t li√™n k·∫øt s·∫£n ph·∫©m");
            updateProductLinks();
            
            console.log("B·∫Øt ƒë·∫ßu c·∫≠p nh·∫≠t li√™n k·∫øt gi·ªè h√†ng");
            updateCartLink();
            
            console.log("B·∫Øt ƒë·∫ßu c·∫≠p nh·∫≠t n√∫t th√™m v√†o gi·ªè h√†ng");
            updateCartButtons();
            
            console.log("Ho√†n t·∫•t c·∫≠p nh·∫≠t");
        } catch (error) {
            console.error("L·ªói khi c·∫≠p nh·∫≠t:", error);
        }
    });
</script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            let currentSlide = 0;
            const slides = document.querySelectorAll(".slide");
            const dots = document.querySelectorAll(".dot");
            const totalSlides = slides.length;
            
            function showSlide(index) {
                if (index < 0) index = totalSlides - 1;
                if (index >= totalSlides) index = 0;
                
                slides.forEach(slide => slide.classList.remove("active"));
                dots.forEach(dot => dot.classList.remove("active"));
                
                slides[index].classList.add("active");
                dots[index].classList.add("active");
                currentSlide = index;
            }
            
            document.querySelector(".prev").addEventListener("click", () => {
                showSlide(currentSlide - 1);
            });
            
            document.querySelector(".next").addEventListener("click", () => {
                showSlide(currentSlide + 1);
            });
            
            dots.forEach(dot => {
                dot.addEventListener("click", function() {
                    const slideIndex = parseInt(this.getAttribute("data-index"));
                    showSlide(slideIndex);
                });
            });
            
            setInterval(() => {
                showSlide(currentSlide + 1);
            }, 5000);
        });
    </script>
<div class="gachduoi2">
    <h2 class="title">S·∫¢N PH·∫®M M·ªöI</h2>
</div>
<div class="banchay banchay-new">
    <div class="product-list">
        <div class="product-card new">
            <span class="discount-label">-10%</span>
            <span class="new-label">NEW</span>
            <a href="thongtinsanpham.html?id=1">
                <img src="anh/ip15pl.png" alt="iPhone 15 Plus">
                <div class="product-name">IPHONE 15 PLUS</div>
                <div class="product-price">
                    17.990.000 <span class="old-price">23.290.000</span>
                </div>
                <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
            </a>
            <button class="cart-button" 
                data-id="1" 
                data-name="IPHONE 15 PLUS" 
                data-price="17990000" 
                data-image="anh/ip15pl.png"
                onclick="redirectToLogin()">
                üõí Th√™m v√†o gi·ªè h√†ng
            </button>
        </div>

        <div class="product-card new">
            <span class="discount-label">-20%</span>
            <span class="new-label">NEW</span>
            <a href="thongtinsanpham.html?id=2">
                <img src="anh/samsung-galaxy-s23-ultra.jpg" alt="Samsung Galaxy S23">
                <div class="product-name">SAMSUNG GALAXY S23</div>
                <div class="product-price">
                    15.990.000 <span class="old-price">19.990.000</span>
                </div>
                <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
            </a>
            <button class="cart-button" 
                data-id="2" 
                data-name="SAMSUNG GALAXY S23" 
                data-price="15990000" 
                data-image="anh/samsung-galaxy-s23-ultra.jpg"
                onclick="redirectToLogin()">
                üõí Th√™m v√†o gi·ªè h√†ng
            </button>
        </div>

        <div class="product-card new">
            <span class="discount-label">-15%</span>
            <span class="new-label">NEW</span>
            <a href="thongtinsanpham.html?id=3">
                <img src="anh/oppo-find-x6.jpg" alt="OPPO FIND X5 PRO">
                <div class="product-name">OPPO FIND X5 PRO</div>
                <div class="product-price">
                    13.990.000 <span class="old-price">16.990.000</span>
                </div>
                <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
            </a>
            <button class="cart-button" 
                data-id="3" 
                data-name="OPPO FIND X5 PRO" 
                data-price="13990000" 
                data-image="anh/oppo-find-x6.jpg"
                onclick="redirectToLogin()">
                üõí Th√™m v√†o gi·ªè h√†ng
            </button>
        </div>

        <div class="product-card new">
            <span class="discount-label">-15%</span>
            <span class="new-label">NEW</span>
            <a href="thongtinsanpham.html?id=4">
                <img src="anh/xiaomi14.jpg" alt="XIAOMI 13 PRO">
                <div class="product-name">XIAOMI 13 PRO</div>
                <div class="product-price">
                    12.990.000 <span class="old-price">15.990.000</span>
                </div>
                <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
            </a>
            <button class="cart-button" 
                data-id="4" 
                data-name="XIAOMI 13 PRO" 
                data-price="12990000" 
                data-image="anh/xiaomi14.jpg"
                onclick="redirectToLogin()">
                üõí Th√™m v√†o gi·ªè h√†ng
            </button>
        </div>
    </div>
</div>
    <div class="gachduoi2">
        <h2 class="title">GI·∫¢M GI√Å</h2>
        <div class="discount-banner">
            <span class="flash-sale">FLASH SALE</span>
            <div class="countdown" id="countdown">
                K·∫øt th√∫c sau: <span id="hours">12</span>:<span id="minutes">00</span>:<span id="seconds">00</span>
            </div>
        </div>
    </div>
    <div class="banchay banchay-discount">
        <div class="product-list">
            <div class="product-card discount">
                <span class="discount-label">-33%</span>
                <a href="thongtinsanpham.html?id=5">
                    <img src="anh/vivo-v27.jpg" alt="VIVO V27">
                    <div class="product-name">VIVO V27</div>
                    <div class="product-price">
                        9.990.000 <span class="old-price">14.990.000</span>
                    </div>
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                </a>
                <button class="cart-button" 
                    data-id="5" 
                    data-name="VIVO V27" 
                    data-price="9990000" 
                    data-image="anh/vivo-v27.jpg">
                    üõí Th√™m v√†o gi·ªè h√†ng
                </button>
            </div>

            <div class="product-card discount">
                <span class="discount-label">-40%</span>
                <a href="thongtinsanpham.html?id=6">
                    <img src="anh/oppo-reno-8t.jpg" alt="OPPO RENO 8T">
                    <div class="product-name">OPPO RENO 8T</div>
                    <div class="product-price">
                        5.990.000 <span class="old-price">9.990.000</span>
                    </div>
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                </a>
                <button class="cart-button" 
                    data-id="6" 
                    data-name="OPPO RENO 8T" 
                    data-price="5990000" 
                    data-image="anh/oppo-reno-8t.jpg">
                    üõí Th√™m v√†o gi·ªè h√†ng
                </button>
            </div>

            <div class="product-card discount">
                <span class="discount-label">-33%</span>
                <a href="thongtinsanpham.html?id=7">
                    <img src="anh/samsung-galaxy-a64.jpg" alt="SAMSUNG GALAXY A54">
                    <div class="product-name">SAMSUNG GALAXY A54</div>
                    <div class="product-price">
                        7.990.000 <span class="old-price">11.990.000</span>
                    </div>
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                </a>
                <button class="cart-button" 
                    data-id="7" 
                    data-name="SAMSUNG GALAXY A54" 
                    data-price="7990000" 
                    data-image="anh/samsung-galaxy-a64.jpg">
                    üõí Th√™m v√†o gi·ªè h√†ng
                </button>
            </div>

            <div class="product-card discount">
                <span class="discount-label">-43%</span>
                <a href="thongtinsanpham.html?id=8">
                    <img src="anh/xiaomi-note12.jpg" alt="XIAOMI REDMI NOTE 12">
                    <div class="product-name">XIAOMI REDMI NOTE 12</div>
                    <div class="product-price">
                        3.990.000 <span class="old-price">6.990.000</span>
                    </div>
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                </a>
                <button class="cart-button" 
                    data-id="8" 
                    data-name="XIAOMI REDMI NOTE 12" 
                    data-price="3990000" 
                    data-image="anh/xiaomi-note12.jpg">
                    üõí Th√™m v√†o gi·ªè h√†ng
                </button>
            </div>
        </div>
    </div>

    <div class="gachduoi2">
        <h2 class="title">∆ØU ƒê√ÉI</h2>
        <div class="promotion-banner">
            <span class="promotion-text">MUA ƒêI·ªÜN THO·∫†I - NH·∫¨N QU√Ä T·∫∂NG</span>
        </div>
    </div>
    <div class="banchay banchay-promotion">
        <div class="product-list">
            <div class="product-card promotion">
                <span class="discount-label">-13%</span>
                <span class="gift-label">üéÅ</span>
                <a href="thongtinsanpham.html?id=9">
                    <img src="anh/ip15pl.png" alt="IPHONE 14 PRO MAX">
                    <div class="product-name">IPHONE 14 PRO MAX</div>
                    <div class="product-price">
                        25.990.000 <span class="old-price">29.990.000</span>
                    </div>
                  <div class="product-gift" 
                  data-gift="Tai nghe AirPods 2 ch√≠nh h√£ng, b·∫£o h√†nh 12 th√°ng"
                  data-gift-img="anh/airpods2.jpg" > T·∫∑ng tai nghe AirPods 2</div>
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                </a>
                <button class="cart-button" 
                    data-id="9" 
                    data-name="IPHONE 14 PRO MAX" 
                    data-price="25990000" 
                    data-gift="Tai nghe AirPods 2 ch√≠nh h√£ng, b·∫£o h√†nh 12 th√°ng"
                    data-gift-img="anh/airpods2.jpg"
                    data-image="anh/ip15pl.png">
                    üõí Th√™m v√†o gi·ªè h√†ng
                </button>
            </div>

            <div class="product-card promotion">
                <span class="discount-label">-10%</span>
                <span class="gift-label">üéÅ</span>
                <a href="thongtinsanpham.html?id=10">
                    <img src="anh/samsung-galaxy-z.jpg" alt="SAMSUNG GALAXY Z FOLD 5">
                    <div class="product-name">SAMSUNG GALAXY Z FOLD 5</div>
                    <div class="product-price">
                        32.990.000 <span class="old-price">36.990.000</span>
                    </div>
                    <div class="product-gift">T·∫∑ng Galaxy Watch 6</div>
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                </a>
                <button class="cart-button" 
                    data-id="10" 
                    data-name="SAMSUNG GALAXY Z FOLD 5" 
                    data-price="32990000" 
                    data-image="anh/samsung-galaxy-z.jpg">
                    üõí Th√™m v√†o gi·ªè h√†ng
                </button>
            </div>

            <div class="product-card promotion">
                <span class="discount-label">-8%</span>
                <span class="gift-label">üéÅ</span>
                <a href="thongtinsanpham.html?id=11">
                    <img src="anh/oppo-find-13.jpg" alt="OPPO FIND N3">
                    <div class="product-name">OPPO FIND N3</div>
                    <div class="product-price">
                        22.990.000 <span class="old-price">24.990.000</span>
                    </div>
                    <div class="product-gift">T·∫∑ng OPPO Watch</div>
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                </a>
                <button class="cart-button" 
                    data-id="11" 
                    data-name="OPPO FIND N3" 
                    data-price="22990000" 
                    data-image="anh/oppo-find-13.jpg">
                    üõí Th√™m v√†o gi·ªè h√†ng
                </button>
            </div>

            <div class="product-card promotion">
                <span class="discount-label">-12%</span>
                <span class="gift-label">üéÅ</span>
                <a href="thongtinsanpham.html?id=12">
                    <img src="anh/xiaomi-13-pro.jpg" alt="XIAOMI 13T PRO">
                    <div class="product-name">XIAOMI 13T PRO</div>
                    <div class="product-price">
                        14.990.000 <span class="old-price">16.990.000</span>
                    </div>
                    <div class="product-gift">T·∫∑ng Mi Band 8</div>
                    <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                </a>
                <button class="cart-button" 
                    data-id="12" 
                    data-name="XIAOMI 13T PRO" 
                    data-price="14990000" 
                    data-image="anh/xiaomi-13-pro.jpg">
                    üõí Th√™m v√†o gi·ªè h√†ng
                </button>
            </div>
        </div>
    </div>


    <footer>
        <div class="chafooter">
            <div class="chafooter1">
                <div class="footer1">
                    <div class="footer-column">
                        <h3 class="h3_footer">T·ªïng ƒë√†i h·ªó tr·ª£ mi·ªÖn ph√≠</h3>
                        <p>G·ªçi mua h√†ng <b>1800.2097</b> (7h30 - 22h00)</p>
                        <p>G·ªçi khi·∫øu n·∫°i <b>1800.2063</b> (8h00 - 21h30)</p>
                        <p>G·ªçi b·∫£o h√†nh <b>1800.2064</b> (8h00 - 21h00)</p>
                        <h3 class="h3_footer">Ph∆∞∆°ng th·ª©c thanh to√°n</h3>
                        <p class="voucher">(*) Nh·∫≠n ngay voucher 10%</p>
                    </div>
            
                    <div class="footer-column">
                        <h3 class="h3_footer">Th√¥ng tin v√† ch√≠nh s√°ch</h3>
                        <a href="#">Mua h√†ng v√† thanh to√°n Online</a>
                        <a href="#">Mua h√†ng tr·∫£ g√≥p Online</a>
                        <a href="#">Ch√≠nh s√°ch giao h√†ng</a>
                        <a href="#">Trung t√¢m b·∫£o h√†nh ch√≠nh h√£ng</a>
                        <a href="#">Quy ƒë·ªãnh v·ªÅ vi·ªác sao l∆∞u d·ªØ li·ªáu</a>
                    </div>
            
                    <div class="footer-column">
                        <h3 class="h3_footer">D·ªãch v·ª• v√† th√¥ng tin kh√°c</h3>
                        <a href="#">Kh√°ch h√†ng doanh nghi·ªáp</a>
                        <a href="#">∆Øu ƒë√£i thanh to√°n</a>
                        <a href="#">Quy ch·∫ø ho·∫°t ƒë·ªông</a>
                        <a href="#">Ch√≠nh s√°ch B·∫£o h√†nh</a>
                        <a href="#">Li√™n h·ªá h·ª£p t√°c kinh doanh</a>
                    </div>
            
                    <div class="footer-column">
                        <h3 class="h3_footer">K·∫øt n·ªëi v·ªõi ch√∫ng t√¥i</h3>
                        <div class="social-icons">
                            <a href="#" class="social-icon">Facebook</a>
                            <a href="#" class="social-icon">Instagram</a>
                            <a href="#" class="social-icon">YouTube</a>
                            <a href="#" class="social-icon">TikTok</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            function updateCountdown() {
                const now = new Date();
                const hours = 23 - now.getHours();
                const minutes = 59 - now.getMinutes();
                const seconds = 59 - now.getSeconds();
                
                document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
                document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
                document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
            }
            
            setInterval(updateCountdown, 1000);
            updateCountdown(); 
            function addToCart(id, name, price, image) {
                let cart = JSON.parse(localStorage.getItem("cart")) || [];
                
                const existingItem = cart.find(item => item.id === id);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        id: id,
                        name: name,
                        price: price,
                        image: image,
                        quantity: 1
                    });
                }
                
                localStorage.setItem("cart", JSON.stringify(cart));
                updateCartCount();
                
                alert(`ƒê√£ th√™m ${name} v√†o gi·ªè h√†ng!`);
            }

            function updateCartCount() {
                const cart = JSON.parse(localStorage.getItem("cart")) || [];
                const count = cart.reduce((total, item) => total + item.quantity, 0);
                
                const cartCountElement = document.querySelector(".cart-count");
                if (cartCountElement) {
                    cartCountElement.textContent = count;
                }
            }

            function updateUserInfo() {
                const loggedInUser = localStorage.getItem("loggedInUser");
                const usernameDisplay = document.getElementById("usernameDisplay");
                const userAvatar = document.getElementById("userAvatar");
                
                if (loggedInUser) {
                    if (usernameDisplay) {
                        usernameDisplay.textContent = loggedInUser;
                    }
                    
                    if (userAvatar) {
                        let userData = JSON.parse(localStorage.getItem(`userData_${loggedInUser}`)) || {
                            avatar: "anh/avatar.png"
                        };
                        userAvatar.src = userData.avatar;
                    }
                }
            }

            document.querySelectorAll(".cart-button").forEach(button => {
                button.addEventListener("click", function() {
                    const productId = this.dataset.id;
                    const productName = this.dataset.name;
                    const productPrice = parseInt(this.dataset.price);
                    const productImage = this.dataset.image;
                    
                    addToCart(productId, productName, productPrice, productImage);
                });
            });

            updateUserInfo();
            updateCartCount();
        });
    </script>
    <script>
document.addEventListener("DOMContentLoaded", function() {
    document.querySelectorAll('.product-gift').forEach(function(gift) {
        gift.style.cursor = "pointer";
        gift.addEventListener('click', function(e) {
            const info = this.getAttribute('data-gift') || this.textContent;
            alert("Th√¥ng tin qu√† t·∫∑ng:\n" + info);
        });
    });
    
});

</script>
<div id="gift-popup" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.4); z-index:9999; align-items:center; justify-content:center;">
  <div style="background:#fff; padding:24px; border-radius:8px; min-width:300px; text-align:center; position:relative;">
    <img id="gift-popup-img" src="" alt="Qu√† t·∫∑ng" style="max-width:120px; margin-bottom:12px;">
    <div id="gift-popup-info" style="margin-bottom:16px;"></div>
    <button id="add-gift-to-cart" style="background:#4caf50; color:#fff; border:none; padding:8px 24px; border-radius:4px; cursor:pointer;">Th√™m qu√† v√†o gi·ªè h√†ng</button>
    <button onclick="closeGiftPopup()" style="margin-left:8px; padding:8px 24px; background:#eee; color:#333; border:none; border-radius:4px; cursor:pointer;">ƒê√≥ng</button>
  </div>
</div>
<script>
function closeGiftPopup() {
    document.getElementById('gift-popup').style.display = 'none';
}

document.addEventListener("DOMContentLoaded", function() {
    let currentGift = null;

    document.querySelectorAll('.product-gift').forEach(function(gift) {
        gift.style.cursor = "pointer";
        gift.addEventListener('click', function(e) {
            const info = this.getAttribute('data-gift') || this.textContent;
            const img = this.getAttribute('data-gift-img') || '';
            currentGift = {
                name: info,
                image: img
            };
            document.getElementById('gift-popup-info').textContent = info;
            document.getElementById('gift-popup-img').src = img;
            document.getElementById('gift-popup').style.display = 'flex';
        });
    });

    document.getElementById('add-gift-to-cart').addEventListener('click', function() {
        if (!currentGift) return;
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart.push({
            id: "gift-" + Date.now(),
            name: currentGift.name,
            price: 0,
            image: currentGift.image,
            quantity: 1,
            isGift: true
        });
        localStorage.setItem("cart", JSON.stringify(cart));

        let history = JSON.parse(localStorage.getItem("orderHistory")) || [];
        history.push({
            id: "gift-" + Date.now(),
            name: currentGift.name,
            image: currentGift.image,
            date: new Date().toLocaleString(),
            isGift: true
        });
        localStorage.setItem("orderHistory", JSON.stringify(history));

        alert("ƒê√£ th√™m qu√† v√†o gi·ªè h√†ng v√† l·ªãch s·ª≠ ƒë∆°n h√†ng!");
        closeGiftPopup();

        if (typeof updateCartCount === "function") updateCartCount();
    });
});
</script>



</body>
</html>
