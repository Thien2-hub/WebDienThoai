<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="style/style_thongtinsanpham.css">
    <title>Th√¥ng tin s·∫£n ph·∫©m</title>
</head>
<body>
    <Header>
        <div class="daudo">
            <div class="dau">
                <div class="logo">
                    <a href="index.html">NH<span class="chu_o">o</span>M7</a>
                </div>
                <div class="search-container">
                    <div class="search-box">
                        <span class="search-icon">üîç</span>
                        <input type="text" placeholder="T√¨m ki·∫øm ·ªü ƒë√¢y" id="searchInput">
                        <button id="searchButton">T√¨m Ki·∫øm</button>
                    </div>
                </div>
            
                <script>
                    document.getElementById("searchButton").addEventListener("click", function() {
                        let searchValue = document.getElementById("searchInput").value;
                        alert("B·∫°n ƒë√£ t√¨m ki·∫øm: " + searchValue);
                    });
                </script>
            </div>
            <div class="giohang_taikhoan">
                <a href="giohang.html" class="giohang_taikhoan-item">
                    <!-- <div class="giohang-icon">
                        üõí
                        <span id="so2_trendaugiohang">2</span>
                    </div> -->
                    <div class="giohang-icon">
                        üõí
                        <span class="cart-count">0</span>
                    </div>
                    <p>Gi·ªè H√†ng</p>
                </a>
    
                <!-- <a href="danhnhap.html" class="giohang_taikhoan-item">
                    <div class="taikhoan-icon">üë§</div>
                    <p id="usernameDisplay">T√†i Kho·∫£n</p>
                </a> -->
                <a href="taikhoan.html" class="giohang_taikhoan-item">
                    <img id="userAvatar" class="user-avatar" src="anh/avt_trang.png" alt="Avatar">
                    <p id="usernameDisplay">T√†i kho·∫£n</p>
                </a>
            </div>
        </div>
        <script src="script.js"></script>
    </Header>
   
    <div class="gachtrang">
        <nav class="trangchu_danhmuc_gioithieu">
            <a href="index.html" class="trangchu_danhmuc_gioithieu-item active">Trang Ch·ªß</a>
            <a href="danhmuc.html" class="trangchu_danhmuc_gioithieu-item ">Danh M·ª•c</a>
            <a href="gioithieu.html" class="trangchu_danhmuc_gioithieu-item ">Gi·ªõi Thi·ªáu</a>
            <span class="underline1"></span>
        </nav>
    </div>
    

    <script>
        document.addEventListener("DOMContentLoaded", function () {
        const menuItems = document.querySelectorAll(".trangchu_danhmuc_gioithieu-item");
        const underline = document.querySelector(".underline1");

        function moveUnderline(element) {
            underline.style.width = `${element.offsetWidth}px`;
            underline.style.left = `${element.offsetLeft}px`;
        }

        const activeItem = document.querySelector(".trangchu_danhmuc_gioithieu-item.active");
        if (activeItem) {
            moveUnderline(activeItem);
        }

        menuItems.forEach(item => {
            item.addEventListener("click", function (e) {
                if (this.getAttribute("href") === "#") {
                    e.preventDefault(); 
                }

                menuItems.forEach(i => i.classList.remove("active"));
                this.classList.add("active");
                moveUnderline(this);
            });
        });
    });

    </script>
     <main>
    <div class="product-container">
        <div class="breadcrumb" style="font-family: 'Inter', sans-serif; margin-top: 20px;">
            <a href="" style="font-size: 28px; padding-right: 10px; color: black;">THONG TIN SAN PHAM</a> <a href="index.html" style="color: rgba(0, 0, 0, 0.388); font-size: 10px;">TRANG CH·ª¶</a> / <span style="color: black; font-weight: bold; font-size: 12px;">TH√îNG TIN S·∫¢N PH·∫®M</span>
        </div>
        <div class="product">
            <div class="product-image">
                <img id="product-img" src="anh/blue15.jpg" alt="S·∫£n ph·∫©m">
            </div>
            <div class="product-info">
                <h1 id="product-name">T√™n s·∫£n ph·∫©m <span id="storage"></span></h1>
                <p id="price">0ƒë</p> <br>
                <p class="rating">‚≠ê <strong id="rating-value">5.0</strong> | <a href="#" style="color: blue;"><span id="review-count">0</span> ƒê√°nh gi√°</a> | <a href="#" style="color: blue;"><span id="comment-count">0</span> B√¨nh lu·∫≠n</a></p>
                
                <div class="options">
                    <p><strong>Dung l∆∞·ª£ng:</strong></p>
                    <div class="option-group" id="storage-options">
                    </div>
                    <p><strong>M√†u s·∫Øc:</strong></p>
                    <div class="option-group" id="color-options">
                    </div>
                </div>
                <div class="buttons">
                    <button class="add-to-cart">üõí Th√™m v√†o gi·ªè h√†ng</button>
                    <button class="buy-now">Mua ngay</button>
                </div>
            </div>
        </div>
    </div>
</main>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const products = [
            {
                id: "1",
                name: "iPhone 15 Plus",
                price: 20000000,
                oldPrice: 23290000,
                rating: 5.0,
                reviews: 12,
                comments: 7,
                image: "anh/blue15.jpg",
                storageOptions: [
                    { storage: "128GB", price: 20000000 },
                    { storage: "256GB", price: 23000000 },
                    { storage: "512GB", price: 27000000 }
                ],
                colorOptions: [
                    { name: "Xanh D∆∞∆°ng", image: "anh/blue15.jpg" },
                    { name: "H·ªìng", image: "anh/pink15.jpg" },
                    { name: "ƒêen", image: "anh/black15.jpg" },
                    { name: "V√†ng", image: "anh/yellow15.jpg" },
                    { name: "Xanh L√°", image: "anh/green15.jpg" }
                ],
                gift: {
        name: "Tai nghe Bluetooth",
        image: "anh/airpods2.jpg",
        desc: "Tai nghe Bluetooth ch√≠nh h√£ng, b·∫£o h√†nh 12 th√°ng"
    }
            },
            {
                id: "2",
                name: "Samsung Galaxy S23",
                price: 15990000,
                oldPrice: 19990000,
                rating: 4.8,
                reviews: 10,
                comments: 5,
                image: "anh/samsung-galaxy-s23-ultra.jpg",
                storageOptions: [
                    { storage: "128GB", price: 15990000 },
                    { storage: "256GB", price: 17990000 },
                    { storage: "512GB", price: 19990000 }
                ],
                colorOptions: [
                    { name: "ƒêen", image: "anh/samsung-galaxy-s23-ultra.jpg" },
                    { name: "Tr·∫Øng", image: "anh/samsung-galaxy-s23-ultra.jpg" },
                    { name: "Xanh", image: "anh/samsung-galaxy-s23-ultra.jpg" }
                ]
            },
            {
                id: "3",
                name: "OPPO FIND X5 PRO",
                price: 13990000,
                oldPrice: 16990000,
                rating: 4.5,
                reviews: 8,
                comments: 4,
                image: "anh/oppo-find-x6.jpg",
                storageOptions: [
                    { storage: "128GB", price: 13990000 },
                    { storage: "256GB", price: 15990000 }
                ],
                colorOptions: [
                    { name: "ƒêen", image: "anh/oppo-find-x6.jpg" },
                    { name: "Tr·∫Øng", image: "anh/oppo-find-x6.jpg" }
                ]
            },
            {
                id: "4",
                name: "XIAOMI 13 PRO",
                price: 12990000,
                oldPrice: 15990000,
                rating: 4.6,
                reviews: 9,
                comments: 6,
                image: "anh/xiaomi14.jpg",
                storageOptions: [
                    { storage: "128GB", price: 12990000 },
                    { storage: "256GB", price: 14990000 }
                ],
                colorOptions: [
                    { name: "ƒêen", image: "anh/xiaomi14.jpg" },
                    { name: "Xanh", image: "anh/xiaomi14.jpg" }
                ]
            },
            {
                id: "5",
                name: "VIVO V27",
                price: 12990000,
                oldPrice: 15990000,
                rating: 4.6,
                reviews: 9,
                comments: 6,
                image: "anh/vivo-v27.jpg",
                storageOptions: [
                    { storage: "128GB", price: 12990000 },
                    { storage: "256GB", price: 14990000 }
                ],
                colorOptions: [
                    { name: "ƒêen", image: "anh/vivo-v27.jpg" },
                    { name: "Xanh", image: "anh/vivo-v27.jpg" }
                ]
            },
           {
                id: "6",
                name: "Oppo Reno 8T",
                price: 12990000,
                oldPrice: 15990000,
                rating: 4.6,
                reviews: 9,
                comments: 6,
                image: "anh/oppo-reno-8t.jpg",
                storageOptions: [
                    { storage: "128GB", price: 12990000 },
                    { storage: "256GB", price: 14990000 }
                ],
                colorOptions: [
                    { name: "ƒêen", image: "anh/oppo-reno-8t.jpg" },
                    { name: "Xanh", image: "anh/oppo-reno-8t.jpg" }
                ]
            },
           {
                id: "7",
                name: "Samsung Galaxy A54",
                price: 12990000,
                oldPrice: 15990000,
                rating: 4.6,
                reviews: 9,
                comments: 6,
                image: "anh/Samsung-galaxy-a64.jpg",
                storageOptions: [
                    { storage: "128GB", price: 12990000 },
                    { storage: "256GB", price: 14990000 }
                ],
                colorOptions: [
                    { name: "ƒêen", image: "anh/Samsung-galaxy-a64.jpg" },
                    { name: "Xanh", image: "anh/Samsung-galaxy-a64.jpg" }
                ]
            },
            {
                id: "8",
                name: "Xiaomi Redmi Note 12",
                price: 12990000,
                oldPrice: 15990000,
                rating: 4.6,
                reviews: 9,
                comments: 6,
                image: "anh/xiaomi-note12.jpg",
                storageOptions: [
                    { storage: "128GB", price: 12990000 },
                    { storage: "256GB", price: 14990000 }
                ],
                colorOptions: [
                    { name: "ƒêen", image: "anh/xiaomi-note12.jpg" },
                    { name: "Xanh", image: "anh/xiaomi-note12.jpg" }
                ]
            },
            {
                id: "9",
                name: "iPhone 14 Pro",
                price: 12990000,
                oldPrice: 15990000,
                rating: 4.6,
                reviews: 9,
                comments: 6,
                image: "anh/ip15pl.png",
                storageOptions: [
                    { storage: "128GB", price: 12990000 },
                    { storage: "256GB", price: 14990000 }
                ],
                colorOptions: [
                    { name: "ƒêen", image: "anh/ip15pl.png" },
                    { name: "Xanh", image: "anh/ip15pl.png" }
                ]
            },
            {
                id: "10",
                name: "Samsung Galaxy Z Fold 5",
                price: 12990000,
                oldPrice: 15990000,
                rating: 4.6,
                reviews: 9,
                comments: 6,
                image: "anh/samsung-galaxy-z.jpg",
                storageOptions: [   
                    { storage: "128GB", price: 12990000 },
                    { storage: "256GB", price: 14990000 }
                ],
                colorOptions: [
                    { name: "ƒêen", image: "anh/samsung-galaxy-z.jpg" },
                    { name: "Xanh", image: "anh/samsung-galaxy-z.jpg" }
                ]
            },{
                id: "11",
                name: "Oppo Find N3",
                price: 12990000,
                oldPrice: 15990000,
                rating: 4.6,
                reviews: 9,
                comments: 6,
                image: "anh/oppo-find-13.jpg",
                storageOptions: [
                    { storage: "128GB", price: 12990000 },
                    { storage: "256GB", price: 14990000 }
                ],
                colorOptions: [
                    { name: "ƒêen", image: "anh/oppo-find-13.jpg" },
                    { name: "Xanh", image: "anh/oppo-find-13.jpg" }
                ]
            },
            {
                id: "12",
                name: "Xiaomi 13T Pro",
                price: 12990000,
                oldPrice: 15990000,
                rating: 4.6,
                reviews: 9,
                comments: 6,
                image: "anh/xiaomi-13-pro.jpg",
                storageOptions: [
                    { storage: "128GB", price: 12990000 },
                    { storage: "256GB", price: 14990000 }
                ],
                colorOptions: [
                    { name: "ƒêen", image: "anh/xiaomi-13-pro.jpg" },
                    { name: "Xanh", image: "anh/xiaomi-13-pro.jpg" }
                ]
            },
        ];

        function updateCartCount() {
            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            let totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.querySelector(".cart-count").innerText = totalCount;
        }

        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id') || "1";

        const product = products.find(p => p.id === productId);

        if (product) {
            
            document.getElementById('product-img').src = product.image;
            document.getElementById('product-img').alt = product.name;
            document.getElementById('product-name').innerHTML = product.name + (product.storageOptions.length > 0 ? ' <span id="storage">' + product.storageOptions[0].storage + '</span>' : '');
            document.getElementById('price').innerText = product.price.toLocaleString() + 'ƒë';
            document.getElementById('rating-value').innerText = product.rating.toFixed(1);
            document.getElementById('review-count').innerText = product.reviews;
            document.getElementById('comment-count').innerText = product.comments;
            

            const storageOptionsContainer = document.getElementById('storage-options');
            storageOptionsContainer.innerHTML = '';
            
            if (product.storageOptions && product.storageOptions.length > 0) {
                product.storageOptions.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.className = 'option' + (index === 0 ? ' selected' : '');
                    button.dataset.storage = option.storage;
                    button.dataset.price = option.price;
                    button.innerText = option.storage;
                    storageOptionsContainer.appendChild(button);
                });
            } else {
                document.querySelector('.options p:first-child').style.display = 'none';
                storageOptionsContainer.style.display = 'none';
            }

            const colorOptionsContainer = document.getElementById('color-options');
            colorOptionsContainer.innerHTML = '';
            
            if (product.colorOptions && product.colorOptions.length > 0) {
                product.colorOptions.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.className = 'option' + (index === 0 ? ' selected' : '');
                    button.dataset.color = option.image;
                    button.innerHTML = `<img src="${option.image}" alt="${option.name}"> ${option.name}`;
                    colorOptionsContainer.appendChild(button);
                });
            } else {
                document.querySelector('.options p:last-child').style.display = 'none';
                colorOptionsContainer.style.display = 'none';
            }

            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function () {
                    let group = this.parentElement.id;
                    
                    document.querySelectorAll(`#${group} .option`).forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    if (group === "storage-options") {
                        document.getElementById('storage').innerText = this.dataset.storage;
                        let price = this.dataset.price ? parseInt(this.dataset.price) : product.price;
                        document.getElementById('price').innerText = price.toLocaleString() + "ƒë";
                    } else if (group === "color-options") {
                        document.getElementById('product-img').src = this.dataset.color;
                    }
                });
            });
            

            document.querySelector('.add-to-cart').addEventListener('click', function () {
                const loggedInUser = localStorage.getItem("loggedInUser");
                const selectedStorage = document.querySelector('#storage-options .option.selected');
                const storage = selectedStorage ? selectedStorage.dataset.storage : '';
                const price = selectedStorage ? parseInt(selectedStorage.dataset.price) : product.price;
                
                let cartProduct = {
                    id: product.id,
                    name: product.name,
                    storage: storage,
                    price: price,
                    image: document.getElementById('product-img').src,
                    quantity: 1
                };
                
                let cart = JSON.parse(localStorage.getItem("cart")) || [];
                let existingProduct = cart.find(item => 
                    item.id === cartProduct.id && 
                    item.storage === cartProduct.storage
                );
                
                if (existingProduct) {
                    existingProduct.quantity += 1;
                } else {
                    cart.push(cartProduct);
                }
                
                localStorage.setItem("cart", JSON.stringify(cart));
                updateCartCount();
                alert("ƒê√£ th√™m v√†o gi·ªè h√†ng!");
            });

            document.querySelector('.buy-now').addEventListener('click', function () {
                const selectedStorage = document.querySelector('#storage-options .option.selected');
                const storage = selectedStorage ? selectedStorage.dataset.storage : '';
                const price = selectedStorage ? parseInt(selectedStorage.dataset.price) : product.price;
                
                let cartProduct = {
                    id: product.id,
                    name: product.name,
                    storage: storage,
                    price: price,
                    image: document.getElementById('product-img').src,
                    quantity: 1
                };
                

                localStorage.setItem("checkoutCart", JSON.stringify([cartProduct]));
            window.location.href = "thanhtoan.html";
            });
        } else {
            document.querySelector('.product-container').innerHTML = `
                <div class="error-message">
                    <h2>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m</h2>
                    <p>S·∫£n ph·∫©m b·∫°n ƒëang t√¨m ki·∫øm kh√¥ng t·ªìn t·∫°i ho·∫∑c ƒë√£ b·ªã x√≥a.</p>
                    <a href="index.html" class="back-button">Quay l·∫°i trang ch·ªß</a>
                </div>
            `;
        }

        updateCartCount();
    });
    
</script>
<div id="reviews-modal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close" id="close-reviews">&times;</span>
    <h3>Danh s√°ch ƒë√°nh gi√°</h3>
    <ul id="reviews-list">
    </ul>
  </div>
</div>
<div id="comments-modal" class="modal" style="display:none;">
  <div class="modal-content">
    <span class="close" id="close-comments">&times;</span>
    <h3>Danh s√°ch b√¨nh lu·∫≠n</h3>
    <ul id="comments-list">
    </ul>
  </div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function() {
    document.querySelector('.rating a[href="#"]').onclick = function(e) {
        e.preventDefault();
        document.getElementById("reviews-list").innerHTML = "<li>Ng∆∞·ªùi d√πng A: R·∫•t t·ªët!</li><li>Ng∆∞·ªùi d√πng B: H√†i l√≤ng!</li>";
        document.getElementById("reviews-modal").style.display = "block";
    };
    document.querySelectorAll('.rating a[href="#"]')[1].onclick = function(e) {
        e.preventDefault();
        document.getElementById("comments-list").innerHTML = "<li>Ng∆∞·ªùi d√πng C: S·∫£n ph·∫©m ƒë·∫πp!</li><li>Ng∆∞·ªùi d√πng D: Giao h√†ng nhanh!</li>";
        document.getElementById("comments-modal").style.display = "block";
    };
    document.getElementById("close-reviews").onclick = function() {
        document.getElementById("reviews-modal").style.display = "none";
    };
    document.getElementById("close-comments").onclick = function() {
        document.getElementById("comments-modal").style.display = "none";
    };
});
</script>